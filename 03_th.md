

## สัปดาห์ที่ 3 JSX และพื้นฐานของ Component**

### วัตถุประสงค์การเรียนรู้

* สามารถใช้ JSX และ React Component เพื่อสร้างอินเทอร์เฟซแบบไดนามิกได้

### หัวข้อย่อย

* พื้นฐาน JavaScript และ JSX
* ไวยากรณ์และการใช้นิพจน์ใน JSX
* ความแตกต่างระหว่าง Functional component และ Class component
* การใช้ useState และ props

---

## พื้นฐานของ JavaScript และ JSX

แอปพลิเคชัน React ถูกสร้างขึ้นจากภาษา JavaScript และไวยากรณ์ขยาย (syntax extension) ที่เรียกว่า JSX
ในส่วนนี้จะอธิบายคุณสมบัติหลักของ JavaScript ที่ใช้ใน React รวมถึงการทำงานของ JSX ในการสร้างองค์ประกอบของ UI

### คุณสมบัติสำคัญของ JavaScript สำหรับ React

* **const, let, var**

  * `const` ใช้กับค่าคงที่ที่ไม่สามารถเปลี่ยนแปลงได้
  * `let` ใช้กับค่าที่เปลี่ยนแปลงได้ และเป็น block-scoped
  * `var` เป็น function-scoped ซึ่งไม่ค่อยใช้ใน JavaScript ยุคใหม่

ตัวอย่าง:

```javascript
const name = "React";
let count = 0;
```

* **Arrow Functions (ฟังก์ชันลูกศร)**
  เป็นการเขียนฟังก์ชันแบบย่อ และคงค่าของ `this` ตามขอบเขต (lexical scope) เหมาะสำหรับ callback และ React component

```javascript
const greet = (name) => `Hello, ${name}`;
```

* **Destructuring (การแยกโครงสร้าง)**
  ใช้ดึงค่าออกจาก object หรือ array ได้โดยตรง มักใช้กับ props หรือ state ใน React

```javascript
const user = { name: "Ada", age: 25 };
const { name, age } = user;
```

* **Template Literals (สตริงแม่แบบ)**
  ใช้ backtick (`` ` ``) และสามารถแทรกตัวแปรด้วย `${}`

```javascript
const greeting = `Welcome, ${name}!`;
```

---

### JSX คืออะไร?

JSX ย่อมาจาก JavaScript XML เป็นการขยายไวยากรณ์ของ JavaScript ที่ทำให้สามารถเขียนโค้ดคล้าย HTML ภายในไฟล์ JavaScript ได้
React จะทำการคอมไพล์ JSX ให้เป็นการเรียก `React.createElement()`

* **Visual Syntax**: JSX ทำให้โค้ด UI อ่านง่าย คล้าย HTML
* **Compilation**: JSX จะถูกแปลงเป็น JavaScript เช่น

```javascript
const element = <h1>Hello, world!</h1>;
// จะถูกแปลงเป็น
React.createElement("h1", null, "Hello, world!");
```

---

### เหตุผลที่ควรใช้ JSX

* **ความอ่านง่าย (Readability)**
  JSX ทำให้เห็นโครงสร้าง UI พร้อมตรรกะในที่เดียว

* **การสนับสนุนจากเครื่องมือ (Tooling Support)**
  รองรับ linting, autocomplete, และ type checking ช่วยลดข้อผิดพลาดตั้งแต่ระยะต้น

* **ไวยากรณ์เชิงประกาศ (Declarative Syntax)**
  อ่านโค้ดแล้วสามารถมองเห็นได้ชัดเจนว่าหน้าจอจะ render อะไร

---

### กฎของไวยากรณ์ JSX

* **ต้องมี Root Element เพียงหนึ่ง**
  JSX ทุกบล็อกต้องคืนค่าเป็นองค์ประกอบหลักเพียงหนึ่ง เช่น ใช้ `<div>` หรือ React Fragment `<>...</>`

* **การตั้งชื่อแอตทริบิวต์ (Attribute Naming)**

  * ใช้ `className` แทน `class`
  * ใช้ `htmlFor` แทน `for`
  * ใช้ camelCase สำหรับ event เช่น `onClick`, `onChange`

* **การฝังนิพจน์ (Embedding Expressions)**
  ใช้ `{ }` เพื่อแทรก JavaScript ลงใน JSX

```javascript
const name = "Ada";
return <h1>Hello, {name}!</h1>;
```

---

### รูปแบบที่พบบ่อยใน JSX

* **การแสดงผลแบบมีเงื่อนไข (Conditional Rendering)**

```javascript
{isLoggedIn ? <p>Welcome back!</p> : <p>Please log in.</p>}
{showHint && <span>Hint: Think before you click.</span>}
```

* **การแสดงผลรายการ (Rendering Lists)**

```javascript
const fruits = ["Apple", "Banana"];
<ul>
  {fruits.map((fruit, index) => (
    <li key={index}>{fruit}</li>
  ))}
</ul>
```

---

## ไวยากรณ์และการใช้นิพจน์ใน JSX (JSX Syntax and Expressions)

JSX เป็นไวยากรณ์ที่อ่านง่ายและมีพลังในการบรรยายส่วนติดต่อผู้ใช้ (UI) ใน React ซึ่งช่วยให้สามารถผสมผสานโค้ด markup กับนิพจน์ของ JavaScript ได้อย่างเป็นธรรมชาติและกระชับ

### โครงสร้างและความถูกต้องของ JSX

* **One Parent Element Rule**
  ทุก JSX block ต้องถูกครอบด้วยองค์ประกอบหลัก (root element) เพียงหนึ่ง เนื่องจาก JSX ถูกแปลงเป็น `React.createElement()` ที่คืนค่าเพียงองค์ประกอบเดียว หากมี sibling หลายตัว ให้ใช้ `<div>` หรือ React Fragment (`<>...</>`)

```javascript
return (
  <div>
    <h1>Hello</h1>
    <p>Welcome!</p>
  </div>
);

// หรือใช้ Fragment
return (
  <>
    <h1>Hello</h1>
    <p>Welcome!</p>
  </>
);
```

* **Self-Closing Tags**
  JSX บังคับให้ tag ที่ไม่มี child ต้องปิดด้วย `/>` เช่น `<img />`, `<br />`, `<input />`

* **JSX Comments**
  การเขียนคอมเมนต์ต้องครอบด้วย `{}`

```javascript
{/* This is a JSX comment */}
```

---

### การฝังนิพจน์ของ JavaScript

ใน JSX สามารถใส่นิพจน์ของ JavaScript ได้โดยตรงโดยใช้ `{ }`

* **ตัวแปรและการคำนวณ**

```javascript
const name = "Ada";
const age = 25;
return <p>{name} is {age} years old.</p>;
```

* **การเรียกฟังก์ชัน**

```javascript
function getGreeting(name) {
  return `Hello, ${name}!`;
}
return <h2>{getGreeting("Grace")}</h2>;
```

* **ข้อจำกัด**
  ไม่สามารถเขียนคำสั่ง (statements) เช่น `if` หรือ `for` ได้โดยตรง ต้องใช้ ternary operator หรือ `.map()` แทน

---

### การแสดงผลแบบมีเงื่อนไข (Conditional Rendering)

React อนุญาตให้ render แบบมีเงื่อนไขด้วยรูปแบบที่กระชับ

* **Ternary Operator**

```javascript
{isLoggedIn ? <p>Welcome!</p> : <p>Please log in.</p>}
```

* **Logical AND (&&)**

```javascript
{hasPermission && <button>Delete</button>}
```

* **Null Rendering**

```javascript
{!visible ? null : <div>Now you see me</div>}
```

---

### การใช้ `.map()` เพื่อ render list

React ใช้ `.map()` ในการแปลง array เป็นองค์ประกอบ JSX หลายรายการ

```javascript
const items = ["Apple", "Banana", "Orange"];
<ul>
  {items.map((item, index) => (
    <li key={index}>{item}</li>
  ))}
</ul>
```

* **การใช้ Key**
  ต้องกำหนด prop `key` ที่ไม่ซ้ำให้กับแต่ละองค์ประกอบ เพื่อให้ React จัดการ re-render ได้อย่างมีประสิทธิภาพ

---

### กฎของ Attribute ใน JSX

เนื่องจาก JSX ไม่ใช่ HTML จึงใช้กฎการตั้งชื่อที่เป็นไปตามมาตรฐานของ JavaScript

* **CamelCase Naming**
  เช่น `onClick` แทน `onclick`, `tabIndex` แทน `tabindex`

* **Boolean Attributes**
  สามารถเขียนโดยไม่กำหนดค่า หรือตั้งค่าเป็น `true`

```javascript
<input disabled />   // เท่ากับ <input disabled={true} />
```

* **ความแตกต่างจาก HTML**

  * `class` → `className`
  * `for` → `htmlFor`

---

## Functional Components vs Class Components

Component ใน React เป็นองค์ประกอบหลักในการสร้าง UI และสามารถแบ่งเป็น 2 ประเภท: **Functional Component** และ **Class Component**

### Component คืออะไร?

Component คือฟังก์ชันหรือคลาสใน JavaScript ที่สามารถรับค่า `props` และส่งคืน React element ซึ่งจะบอกว่าหน้าจอควรแสดงผลอย่างไร

ลักษณะสำคัญ:

* **Reusable**: ใช้ซ้ำได้ในหลายส่วนของโปรแกรม
* **Composable**: สามารถซ้อนกันเป็นลำดับชั้น UI ได้
* **Isolated**: แต่ละ component จัดการ state และ logic ของตัวเอง

---

### Functional Components

* เขียนเป็นฟังก์ชัน JavaScript ที่คืนค่า JSX
* เดิมทีใช้กับ component ที่ไม่มี state แต่ปัจจุบันสามารถใช้ state และ side effects ได้ผ่าน **Hooks** (เช่น `useState`)
* ไม่ใช้ `this`
* ถือเป็นมาตรฐานปัจจุบันที่นิยมใช้

```javascript
function Welcome(props) {
  return <h1>Hello, {props.name}!</h1>;
}

// หรือแบบ Arrow Function
const Welcome = ({ name }) => <h1>Hello, {name}!</h1>;
```

---

### Class Components

* เขียนเป็นคลาสที่สืบทอดจาก `React.Component`
* ต้องมีเมธอด `render()` ที่คืนค่า JSX
* รองรับ **Lifecycle Methods** เช่น `componentDidMount()`
* ใช้ `this.state` และ `this.setState()` สำหรับ state

```javascript
class Welcome extends React.Component {
  render() {
    return <h1>Hello, {this.props.name}!</h1>;
  }
}
```

---

### การใช้ Props

Props ใช้ได้ทั้งใน Functional และ Class component

* **Functional Component**

```javascript
function Greeting(props) {
  return <p>{props.name}</p>;
}
```

* **Class Component**

```javascript
class Greeting extends React.Component {
  render() {
    return <p>{this.props.name}</p>;
  }
}
```

---

### ตารางเปรียบเทียบ

| คุณสมบัติ        | Functional Component      | Class Component              |
| ---------------- | ------------------------- | ---------------------------- |
| ไวยากรณ์         | Function / Arrow Function | ES6 Class                    |
| การเข้าถึง Props | props                     | this.props                   |
| การจัดการ State  | useState()                | this.state + this.setState() |
| Hooks            | ใช้ได้                    | ไม่รองรับ                    |
| Lifecycle Logic  | useEffect()               | Lifecycle Methods            |
| ความยาวโค้ด      | กระชับ                    | ยาวกว่า                      |
| คำแนะนำ          | ควรใช้                    | ใช้กับโค้ดเก่า               |

---

## useState และ Props

ความสามารถของ React Components ที่ทำให้โต้ตอบได้คือ **การส่งข้อมูลผ่าน props** และ **การเก็บข้อมูลภายในด้วย state**

### Props คืออะไร?

* Props = Properties
* ใช้ส่งค่าจาก **Parent → Child component**
* เป็น **Immutable** (ไม่สามารถแก้ไขได้ใน Child)
* ใช้สำหรับกำหนดค่าและทำให้ component reuse ได้

```javascript
function Greeting(props) {
  return <h1>Hello, {props.name}!</h1>;
}

// การใช้งาน
<Greeting name="Ada" />
```

---

### useState คืออะไร?

`useState` เป็น **Hook** ที่ช่วยให้ Functional component มี state

* ใช้เก็บค่าที่เปลี่ยนแปลงได้ เช่น counter, form input
* คืนค่าเป็นคู่: \[ค่า, ฟังก์ชันอัปเดต]
* เมื่อค่า state เปลี่ยน → component re-render

```javascript
import { useState } from 'react';

function Counter() {
  const [count, setCount] = useState(0);

  return (
    <div>
      <p>Count: {count}</p>
      <button onClick={() => setCount(count + 1)}>+1</button>
    </div>
  );
}
```

---

### การผสมผสาน Props และ useState

```javascript
function Counter({ start }) {
  const [count, setCount] = useState(start);

  return (
    <div>
      <p>Start value: {start}</p>
      <p>Current count: {count}</p>
      <button onClick={() => setCount(count + 1)}>+1</button>
    </div>
  );
}

// การใช้งาน
<Counter start={5} />
```

---

### กฎและแนวทางปฏิบัติที่ดี

* ห้ามแก้ไข state โดยตรง → ใช้ฟังก์ชัน setter เสมอ
* เก็บ state ให้น้อยที่สุด
* ใช้ `useState` แยกสำหรับแต่ละตัวแปรแทนการเก็บรวมเป็น object

```javascript
const [name, setName] = useState("Ada");
const [age, setAge] = useState(30);
```

---

 

## แบบฝึกหัด (Exercises)

1. อธิบายว่า JSX คืออะไร และมีการบูรณาการกับ JavaScript อย่างไร
   **คำตอบ:** JSX เป็นส่วนขยายของไวยากรณ์ในภาษา JavaScript ที่ช่วยให้สามารถเขียนโค้ดในรูปแบบที่คล้าย HTML ได้ JSX จะถูกคอมไพล์ไปเป็นคำสั่ง `React.createElement()` และช่วยให้การพัฒนา UI มีความชัดเจนและเป็นแบบ declarative

2. ทำไม JSX จึงใช้ `className` แทนที่จะใช้ `class`?
   **คำตอบ:** เนื่องจาก `class` เป็นคำสงวนในภาษา JavaScript ที่ใช้ในการประกาศคลาส JSX จึงเลือกใช้ `className` เพื่อลดความกำกวมและทำให้ชัดเจนว่าเป็น attribute ขององค์ประกอบ HTML

3. คุณจะฝังตัวแปร JavaScript ภายใน JSX ได้อย่างไร?
   **คำตอบ:** ใช้วงเล็บปีกกา `{}` ครอบนิพจน์ ตัวอย่างเช่น:

   ```javascript
   <h1>Hello, {name}!</h1>
   ```

4. อธิบายความแตกต่างระหว่าง `const` และ `let` ใน JavaScript
   **คำตอบ:** `const` ใช้สร้างตัวแปรที่ไม่สามารถกำหนดค่าใหม่ได้และมีขอบเขตแบบ block scope ส่วน `let` ก็เป็น block scope เช่นกัน แต่สามารถกำหนดค่าใหม่ได้

5. จุดประสงค์ของการใช้ `{}` ใน JSX คืออะไร?
   **คำตอบ:** ใช้เพื่อฝังนิพจน์ JavaScript เช่นตัวแปร ฟังก์ชัน หรือการคำนวณ เข้าสู่โค้ด JSX

6. อธิบายวิธี render องค์ประกอบแบบมีเงื่อนไขใน JSX
   **คำตอบ:** ใช้ ternary operator (`condition ? A : B`) หรือใช้ logical AND (`condition && A`) เพื่อ render องค์ประกอบตามเงื่อนไข

7. เหตุใด JSX ทุก component ต้อง return เฉพาะ root element เพียงหนึ่งตัว?
   **คำตอบ:** เนื่องจาก JSX ถูกคอมไพล์ไปเป็น `React.createElement()` ซึ่งจะต้องคืนค่าเพียงองค์ประกอบเดียว การครอบด้วย `<div>` หรือ React Fragment จึงเป็นสิ่งจำเป็น

8. คุณจะ render รายการ (list) ของข้อมูลใน JSX ได้อย่างไร?
   **คำตอบ:** ใช้ `.map()` เพื่อแปลง array ให้กลายเป็น array ขององค์ประกอบ JSX โดยแต่ละ item ต้องมี prop `key` ที่ไม่ซ้ำกัน

9. ความแตกต่างเชิงโครงสร้างระหว่าง Functional Component และ Class Component คืออะไร?
   **คำตอบ:** Functional Component เป็นเพียงฟังก์ชันธรรมดาที่ return JSX ส่วน Class Component ใช้ ES6 class ที่ extends จาก `React.Component` และต้องมีเมธอด `render()`

10. เหตุใด Functional Components จึงไม่ต้องใช้ `this`?
    **คำตอบ:** เนื่องจาก Functional Components เป็นฟังก์ชันธรรมดาที่รับ `props` ผ่าน argument โดยตรง ไม่ได้มี context ของ `this` แบบคลาส

11. ฟีเจอร์ใดของ React ที่ทำให้ Functional Components สามารถจัดการ state ได้?
    **คำตอบ:** React Hook ที่ชื่อว่า `useState`

12. เมื่อใดที่ยังจำเป็นต้องใช้ Class Component?
    **คำตอบ:** เมื่อทำงานกับโค้ดเก่าที่พึ่งพา class lifecycle methods หรือไลบรารีบางตัวที่ยังไม่รองรับ hooks

13. Props คืออะไร และถูกส่งเข้าสู่ component อย่างไร?
    **คำตอบ:** Props คือค่าที่ถูกส่งจาก Parent ไปยัง Child Component ในรูปแบบ attribute โดย Child สามารถใช้ค่าเหล่านี้ได้แต่ไม่สามารถแก้ไข

14. `useState(0)` คืนค่าอะไร?
    **คำตอบ:** คืนค่า array สองค่า ได้แก่ ค่า state ปัจจุบัน (เริ่มต้นคือ 0) และฟังก์ชันสำหรับอัปเดตค่า state

15. จะอัปเดตค่า state variable ได้อย่างไร?
    **คำตอบ:** ใช้ฟังก์ชัน setter ที่ได้จาก `useState` เช่น `setCount(count + 1)`

16. ความแตกต่างระหว่าง Props และ State ใน React คืออะไร?
    **คำตอบ:** Props เป็นค่าที่ส่งจากภายนอก component และไม่สามารถเปลี่ยนแปลงได้ ส่วน State เป็นค่าภายใน component ที่สามารถเปลี่ยนแปลงได้และควบคุมโดย React

---

## แบบฝึกหัดปฏิบัติ (Practice Exercises)

### การเริ่มต้นโครงการ React เปล่า

ก่อนทำแบบฝึกหัด ให้สร้างโครงการ React ใหม่ด้วย `create-react-app` เพื่อเตรียมสภาพแวดล้อมที่สะอาด

```bash
npx create-react-app jsx-practice
cd jsx-practice
npm start
```

จากนั้นเปิดไฟล์ `src/App.js` และเขียนโค้ดของคุณตามโจทย์

---

### แบบฝึกหัด

1. **โครงสร้าง JSX พื้นฐาน**

   * ประกาศตัวแปร `userName`
   * แสดงข้อความต้อนรับด้วยชื่อตัวแปร
   * ใช้ `<div>` ครอบ `<h2>` และ `<p>`

```javascript
const userName = "Grace";

const greeting = (
  <div>
    <h2>Hello, {userName}!</h2>
    <p>Welcome to the app.</p>
  </div>
);

ReactDOM.render(greeting, document.getElementById("root"));
```

2. **การแสดงผลแบบมีเงื่อนไขและ List**

```javascript
const isAdmin = true;
const tasks = ["Review PR", "Write docs", "Fix bugs"];

function Dashboard() {
  return (
    <div>
      <h2>{isAdmin ? "Welcome, Admin" : "Access Denied"}</h2>
      <ul>
        {tasks.map((task, index) => (
          <li key={index}>{task}</li>
        ))}
      </ul>
    </div>
  );
}

ReactDOM.render(<Dashboard />, document.getElementById("root"));
```

3. **Functional vs Class Components**

```javascript
// Functional Component
function GreetUser({ name }) {
  return <div>Hello, {name}!</div>;
}

// Class Component
class GreetUserClass extends React.Component {
  render() {
    return <div>Hello, {this.props.name}!</div>;
  }
}
```

4. **State และ Props ด้วย useState Hook**

```javascript
import React, { useState } from 'react';

function ScoreBoard({ title }) {
  const [score, setScore] = useState(0);

  return (
    <div>
      <h1>{title}</h1>
      <p>Score: {score}</p>
      <button onClick={() => setScore(score + 10)}>Add 10</button>
    </div>
  );
}

ReactDOM.render(<ScoreBoard title="Game 1" />, document.getElementById("root"));
```

---

## ใบงาน: JSX และ React Components (Worksheet)

**วัตถุประสงค์การเรียนรู้:** ใช้ JSX และ React Components เพื่อสร้างส่วนติดต่อผู้ใช้ที่มีความเป็นพลวัต

### ส่วน A: ความเข้าใจเชิงแนวคิด

* JSX คืออะไร และแตกต่างจาก HTML อย่างไร
* อธิบายบทบาทของ Props ใน React Components
* `useState` มีหน้าที่อย่างไร และเหตุใดจึงสำคัญ
* ความแตกต่างระหว่าง Functional Component และ Class Component

---

### ส่วน B: เติมโค้ดให้สมบูรณ์

**โจทย์:** สร้าง Component ที่แสดงชื่อและประวัติ (bio) ของผู้ใช้โดยใช้ props

```javascript
function UserProfile({ name, bio }) {
  return (
    <div>
      <h2>{name}</h2>
      <p>{bio}</p>
    </div>
  );
}
```

---

### ส่วน C: แบบท้าทายการประยุกต์ใช้

**โจทย์:**

* สร้าง Component ที่มีค่าเริ่มต้นของ `score` เท่ากับ 0
* เพิ่มค่า score ขึ้นทีละ 1 เมื่อคลิกปุ่ม
* แสดง score บนหน้าจอ

```javascript
import React, { useState } from 'react';

function ScoreCounter() {
  const [score, setScore] = useState(0);

  return (
    <div>
      <p>Score: {score}</p>
      <button onClick={() => setScore(score + 1)}>+1</button>
    </div>
  );
}
```

---

### ส่วน D: การตรวจสอบตนเองและการสะท้อนผล (Self-Check and Reflection)

รายการตรวจสอบ:

* [ ] ฉัน return เฉพาะ root element หนึ่งตัวในแต่ละ component
* [ ] ฉันใช้ JSX syntax ได้ถูกต้อง (เช่น `className`, `{}`)
* [ ] ฉันใช้ `useState` หรือ props อย่างน้อยหนึ่งครั้ง
* [ ] Component ของฉันอัปเดตผลลัพธ์เมื่อมีการโต้ตอบ (เช่นการคลิกปุ่ม)

**คำถามสะท้อนผล:**
ส่วนใดของใบงานนี้ที่คุณรู้สึกว่าท้าทายที่สุด และคุณแก้ปัญหานั้นอย่างไร?

 