

# สัปดาห์ที่ 5  Layout

##การจัดรูปแบบที่ตอบสนอง (Responsive Styling)

แอปพลิเคชันบนมือถือถูกคาดหวังให้สามารถแสดงผลได้อย่างสม่ำเสมอและเป็นมิตรต่อผู้ใช้บนอุปกรณ์ที่หลากหลาย ไม่ว่าจะเป็น **ขนาดหน้าจอ** ที่แตกต่างกัน, **การหมุนหน้าจอ** (แนวตั้ง/แนวนอน), **แพลตฟอร์ม** (iOS/Android) รวมไปถึง **ความหนาแน่นของพิกเซล (Pixel Density)** ดังนั้น การออกแบบเลย์เอาต์จึงต้องมีความ **responsive** และ **ตระหนักถึงแพลตฟอร์ม (platform-aware)**

React Native สนับสนุนสิ่งนี้ผ่าน:

* **Flexbox:** โมเดลการจัดวางเชิงประกาศ (declarative layout) สำหรับการกำหนดตำแหน่งของ UI
* **Platform APIs:** เช่น `Platform.select()` เพื่อปรับแต่งสไตล์เฉพาะแพลตฟอร์ม
* **Dimension utilities:** เช่น `Dimensions.get()` และ hook `useWindowDimensions()` สำหรับการปรับเลย์เอาต์แบบเรียลไทม์

**ปัญหาหลัก**

> เราจะออกแบบเลย์เอาต์ที่ **ปรับอัตโนมัติ** ให้เหมาะกับหน้าจอและแพลตฟอร์มที่หลากหลาย โดยไม่ต้องเขียนโค้ด UI ซ้ำซ้อนอย่างไร?

**ทำไมต้อง Flexbox?**

* ลดความจำเป็นในการกำหนดขนาดแบบคงที่
* รองรับการกระจายและการห่อหุ้ม (wrapping) ขององค์ประกอบ
* จัดเรียงได้ทั้งตามแกนหลักและแกนขวาง

**แรงจูงใจในการทำ Responsive**

* รองรับอุปกรณ์หลายขนาด (มือถือ, แท็บเล็ต)
* รองรับการเปลี่ยนแนว (Portrait / Landscape)
* คำนวณเลย์เอาต์ใหม่ได้แบบไดนามิก

**เครื่องมือสำคัญ**

* `flexDirection`, `justifyContent`, `alignItems`
* `flexWrap`, `flex` และ utilities เกี่ยวกับ spacing
* `Dimensions.get()`, `useWindowDimensions()`
* `Platform.select()` สำหรับการจัดสไตล์ตามแพลตฟอร์ม
* `SafeAreaView` สำหรับการจัดเลย์เอาต์ในอุปกรณ์ที่มี notch

---

## พื้นฐาน Flexbox

React Native ใช้ **Flexbox** เป็นระบบหลักในการจัดเลย์เอาต์ เพื่อกำหนดตำแหน่ง, การจัดเรียง และการกระจายของ UI components ซึ่งต่างจากการกำหนดตำแหน่งแบบ absolute หรือ grid system เพราะ Flexbox มีความยืดหยุ่นและปรับตัวได้ดี

**แนวคิดหลักของ Flexbox**

1. **flexDirection** – กำหนดทิศทางของแกนหลัก (main axis)

   * `'row'` → ซ้ายไปขวา
   * `'column'` → บนลงล่าง (ค่าเริ่มต้น)

   ```jsx
   <View style={{ flexDirection: 'row' }}>
     <Text>Item 1</Text>
     <Text>Item 2</Text>
   </View>
   ```

2. **justifyContent** – จัดเรียงลูกตามแกนหลัก เช่น `'flex-start'`, `'center'`, `'space-between'`

3. **alignItems** – จัดเรียงลูกตามแกนขวาง เช่น `'flex-start'`, `'center'`, `'stretch'`

4. **flexWrap** – กำหนดว่าลูกจะห่อไปบรรทัดถัดไปหรือไม่ (`'wrap'` / `'nowrap'`)

5. **flex** – กำหนดสัดส่วนการขยาย/หดตัว เช่น `flex: 1` หมายถึงใช้พื้นที่เท่า ๆ กันกับพี่น้องที่มีค่า `flex` เท่ากัน

**ตัวอย่าง**

```jsx
const styles = StyleSheet.create({
  container: {
    flexDirection: 'row',
    justifyContent: 'space-between',
    alignItems: 'center',
  },
  box: {
    width: 50,
    height: 50,
    backgroundColor: '#ccc',
  },
});

<View style={styles.container}>
  <View style={styles.box} />
  <View style={styles.box} />
  <View style={styles.box} />
</View>
```

**ผลลัพธ์**

* กล่อง 3 อันเรียงในแถวเดียว
* เว้นช่องไฟด้วย `space-between`
* จัดให้อยู่กึ่งกลางในแนวตั้งด้วย `alignItems: 'center'`

---

## การจัดเลย์เอาต์ด้วย Flexbox

**สมบัติหลักที่ใช้บ่อย**

* `flexDirection` → ทิศทางหลัก
* `justifyContent` → การจัดเรียงบนแกนหลัก
* `alignItems` → การจัดเรียงบนแกนขวาง
* `flexWrap` → การห่อบรรทัด
* `flex` → การแบ่งพื้นที่
* `margin`, `gap` → เว้นระยะ

**ตัวอย่างแถว (Row Alignment)**

```jsx
<View style={{ flexDirection: 'row', justifyContent: 'space-between' }}>
  <Text>Left</Text>
  <Text>Center</Text>
  <Text>Right</Text>
</View>
```

**ผลลัพธ์:**

```
Left         Center         Right
```

**ตัวอย่าง 2 คอลัมน์ที่ Responsive**

```jsx
<View style={styles.container}>
  <View style={styles.column}><Text>Column 1</Text></View>
  <View style={styles.column}><Text>Column 2</Text></View>
</View>

const styles = StyleSheet.create({
  container: { flexDirection: 'row', flexWrap: 'wrap' },
  column: {
    flex: 1,
    margin: 10,
    padding: 20,
    backgroundColor: '#eee',
  },
});
```

* บนจอใหญ่ → คอลัมน์ข้างกัน
* บนจอแคบ → คอลัมน์เรียงต่อกันด้านล่าง

---

## การใช้ StyleSheet

React Native ใช้ JavaScript objects ในการจัดสไตล์ โดยนิยมใช้ `StyleSheet.create()`

**ข้อดี**

* แปลงเป็น native code ทำงานเร็วขึ้น
* ตรวจสอบค่าที่ผิดพลาดได้
* จัดการโค้ดได้เป็นระบบ

**ตัวอย่าง**

```jsx
const styles = StyleSheet.create({
  container: {
    padding: 20,
    backgroundColor: '#f2f2f2',
  },
  text: {
    fontSize: 18,
    color: '#333',
  },
});
```

**แนวคิดหลัก**

* ใช้ `camelCase`
* ค่าของ style อาจเป็นตัวแปรหรือ expression ได้
* รวมหลาย style ได้ด้วย array:

  ```jsx
  <Text style={[styles.baseText, styles.boldText]}>Example</Text>
  ```

---

## เทคนิคการทำ Responsive

* ใช้ `Dimensions.get()` → ได้ค่าความกว้าง/สูงของหน้าจอ
* ใช้ `useWindowDimensions()` → ค่าจะอัปเดตอัตโนมัติเมื่อหมุนจอ

**ตัวอย่างการปรับตามความกว้างจอ**

```jsx
const { width } = useWindowDimensions();
const isLargeScreen = width > 600;

<View style={isLargeScreen ? styles.rowLayout : styles.columnLayout}>
  <Text>Item 1</Text>
  <Text>Item 2</Text>
</View>
```

**แนวทางปฏิบัติที่ดี**

* ใช้ `flex` แทน fixed size
* เลี่ยงการใช้ pixel แบบ hard-code
* ใช้ margin/padding ให้สม่ำเสมอ
* เงื่อนไขการเรนเดอร์ตามขนาดจอหรือ orientation

---

## การจัดสไตล์เฉพาะแพลตฟอร์ม

React Native มี `Platform.OS` และ `Platform.select()`

**ตัวอย่าง**

```jsx
const styles = StyleSheet.create({
  text: {
    fontSize: Platform.select({
      ios: 18,
      android: 16,
    }),
    padding: Platform.select({
      ios: 12,
      android: 8,
    }),
  },
});
```

* ใช้สำหรับ font, spacing, หรือ behavior ต่างกันใน iOS/Android

---

## Safe Area Management

อุปกรณ์สมัยใหม่มี **notch** และ **home indicator** ที่อาจบัง UI → ใช้ `SafeAreaView`

```jsx
<SafeAreaView style={{ flex: 1 }}>
  <Text>Content inside safe area</Text>
</SafeAreaView>
```

* ป้องกัน UI ถูกบัง
* ใช้ควบคู่กับ padding และ flex
* Android มักไม่จำเป็น แต่ควรใช้เพื่อความสม่ำเสมอ

---

## ตัวอย่างจริง: Two-Column Responsive Layout

```jsx
<View style={styles.container}>
  <View style={styles.column}><Text>Column 1</Text></View>
  <View style={styles.column}><Text>Column 2</Text></View>
</View>

const styles = StyleSheet.create({
  container: {
    flexDirection: 'row',
    flexWrap: 'wrap',
    padding: 10,
  },
  column: {
    flex: 1,
    minWidth: '45%',
    margin: 10,
    padding: 20,
    backgroundColor: '#eee',
  },
});
```

* จอกว้าง → แสดง 2 คอลัมน์
* จอแคบ → ซ้อนกันแนวตั้ง

