
# บทเรียน: สัปดาห์ที่ 2 เดือนกันยายน 2025

**หัวข้อ: Navigator**

---

## พื้นฐานการนำทางด้วย React Navigation (Stack Navigator)

\label{subsec\:navigation-fundamentals}

### วัตถุประสงค์

หัวข้อนี้อธิบายแนวคิดและการใช้งานจริงของการนำทาง (Navigation) ใน React Native โดยใช้ React Navigation โดยเน้นที่โมเดล **Stack Navigator** ซึ่งเป็นการสร้างโครงสร้างการนำทางแบบซ้อนกัน (last-in, first-out: LIFO) พร้อมการนิยาม state, การแทนค่าเส้นทาง (route), และความหมายของ action เพื่อให้สามารถอธิบายและสาธิตได้อย่างเป็นระบบและสามารถทำซ้ำได้

### คำอธิบาย

* **Navigation state** ใน React Native เป็น immutable และ deterministic
* **Stack Navigator** จัดการ state โดยใช้โครงสร้างข้อมูลแบบสแตก (LIFO)
* แต่ละ route ประกอบด้วย `name`, `params` (ไม่บังคับ), และลำดับตำแหน่งภายในสแตก
* Action เช่น `navigate`, `push`, `goBack` ทำหน้าที่แปลง state และทำให้เกิดการเปลี่ยนผ่านของ UI
* การ render UI เป็น pure function ของ navigation state

การใช้งานที่แนะนำคือ **native-stack navigator** (`@react-navigation/native-stack`) เพราะให้ประสิทธิภาพและ gesture fidelity ที่ดีกว่า stack implementation แบบ JavaScript

**โค้ดตัวอย่าง:**

```javascript
import { NavigationContainer } from '@react-navigation/native';
import { createNativeStackNavigator } from '@react-navigation/native-stack';

const Stack = createNativeStackNavigator();

function App() {
  return (
    <NavigationContainer>
      <Stack.Navigator initialRouteName="Home">
        <Stack.Screen name="Home" component={HomeScreen} />
        <Stack.Screen name="Detail" component={DetailScreen} />
      </Stack.Navigator>
    </NavigationContainer>
  );
}
```

**การส่งพารามิเตอร์ระหว่างเส้นทาง (route parameters):**

```javascript
navigation.navigate('Detail', { unitId: item.id });

// ใน DetailScreen
const { unitId } = route.params;
```

แนวปฏิบัติที่ดีคือควรส่งเฉพาะ **ตัวระบุ (identifier)** ที่มีความเสถียร และให้หน้าปลายทางเป็นผู้ resolve ข้อมูลเพิ่มเติม ใน TypeScript ควรใช้ **route map** เพื่อให้เกิด compile-time validation ของพารามิเตอร์

**ตัวอย่างการใช้ Dynamic Header:**

```javascript
<Stack.Screen
  name="Detail"
  component={DetailScreen}
  options={({ route }) => ({ title: route.params.unitId })}
/>
```

นอกจากนี้ Action อื่น ๆ เช่น `replace` และ `reset` ใช้ในการจัดการ root flow และ state transition ส่วน hook อย่าง `useFocusEffect` ใช้แสดง lifecycle behavior เช่น resource management เมื่อหน้าจอถูก mount หรือ blur

---

## การสร้างแบบจำลองข้อมูลเพื่อใช้กับสื่อการสอน

\label{subsec\:data-modeling}

### วัตถุประสงค์

อธิบายวิธีการที่เป็นระบบสำหรับการแทนค่าข้อมูลทางการศึกษาในแอปพลิเคชัน React Native โดยเน้นการออกแบบ schema ที่เชื่อมโยง entity ทางแนวคิด (เช่น บทเรียน วัตถุประสงค์ กลยุทธ์ วัสดุ) เข้ากับข้อควรพิจารณาเชิงปฏิบัติ เช่น immutability, serialization และ internationalization

### ชุดข้อมูลมาตรฐาน (Canonical Dataset)

```javascript
const lessons = [
  {
    title: 'Educational Psychology for Teachers',
    subtitle: 'Basic theories and classroom applications',
    objectives: [
      'Explain key learning theories (Behaviorism, Constructivism)',
      'Relate theories to the design of learning activities',
    ],
    strategies: ['Case-based discussion', 'Reflective journaling activities'],
    materials: [
      'Academic articles in Thai/English',
      'Theory summary infographics',
    ],
    imageUrl: 'https://static.vecteezy.com/system/resources/thumbnails/006/487/917/small_2x/man-avatar-icon-free-vector.jpg',
  },
  ...
];
```

### เหตุผลที่ใช้โครงสร้างนี้

* **Coherence:** แต่ละ lesson เป็น self-contained unit ที่ประกอบด้วย identity (title, subtitle), pedagogy (objectives, strategies), resources (materials), และ media reference (`imageUrl`)
* **Readability:** ใช้ array ซ้อนเพื่อให้ mapping ไปยัง bullet list ใน UI ได้ตรงไปตรงมา
* **Serialization:** ใช้ JSON type ที่ปลอดภัย สามารถส่งผ่าน navigation params และเก็บใน local storage ได้
* **Pedagogical Transparency:** นักศึกษาจะเห็นได้ทันทีว่าแต่ละฟิลด์เชิงแนวคิด เช่น objectives ถูกแปลงเป็น UI section อย่างไร
* **Scalability Path:** โครงสร้างนี้สามารถขยายไปสู่ normalization ได้ในอนาคต แต่สำหรับห้องเรียน การใช้ denormalized structure จะลดความซับซ้อน

### การใช้งานจริง

โครงสร้างนี้สามารถขับเคลื่อนทั้ง **FlatList** (แสดง title และ subtitle) และหน้ารายละเอียด (แสดง objectives, strategies, materials) โดยไม่ต้องทำ transformation เพิ่มเติม

---

## การแสดงรายการด้วย \texttt{FlatList}

\label{subsec\:flatlist}

### วัตถุประสงค์

อธิบายโมเดลการ virtualization ของ **FlatList** ที่แสดงผลเฉพาะข้อมูลที่อยู่ในหน้าจอ (sliding window) เพื่อคงประสิทธิภาพ

### คำอธิบาย

การ render รายการอย่างถูกต้องต้องใช้ **key** ที่มีความเป็นเอกลักษณ์และเสถียร เช่น `id` (ไม่ควรใช้ index สำหรับ production)

### โค้ดตัวอย่างแบบย่อ

```javascript
<FlatList
  data={DATA}
  keyExtractor={(item) => item.id}
  renderItem={({ item }) => <Text>{item.title}</Text>}
/>
```

### โค้ดตัวอย่างสำหรับสาธิต

```javascript
<FlatList
  data={lessons}
  keyExtractor={(item, idx) => item.title + ':' + idx} 
  renderItem={({ item }) => (
    <TouchableOpacity
      onPress={() => navigation.navigate('Detail', { unit: item })}
      style={{
        flexDirection: 'row',
        alignItems: 'center',
        backgroundColor: '#faf5ff',
        borderRadius: 12,
        padding: 16,
        marginVertical: 8,
        marginHorizontal: 16,
      }}
    >
      {/* Left icon */}
      <Image
        source={{ uri: item.imageUrl }}
        style={{ width: 40, height: 40, marginRight: 12 }}
      />

      {/* Title + Subtitle */}
      <View style={{ flex: 1 }}>
        <Text style={{ fontSize: 16, fontWeight: '600', color: '#111' }}>
          {item.title}
        </Text>
        <Text style={{ fontSize: 14, color: '#6b7280', marginTop: 2 }}>
          {item.subtitle}
        </Text>
      </View>

      {/* Right arrow */}
      <Ionicons name="chevron-forward" size={20} color="#4b5563" />
    </TouchableOpacity>
  )}
/>
```

---

## การจัดการแอสเซ็ตและไอคอน (Assets and Iconography)

\label{subsec\:assets-iconography}

* การใช้ local asset:

```javascript
<Image source={require('./assets/logo.png')}
       style={{ width: 44, height: 44 }} />
```

* การใช้ remote asset:

```javascript
<Image source={{ uri: 'https://example.com/hero.png' }}
       style={{ width: 92, height: 92 }} />
```

* ใช้ density variants (`logo.png`, `logo@2x.png`, `logo@3x.png`) เพื่อให้ภาพชัดเจนในทุกอุปกรณ์
* สำหรับ icon ควรใช้ library ที่สอดคล้อง เช่น Ionicons

```javascript
<Ionicons name="chevron-forward"
          size={20}
          accessibilityLabel="Go to details" />
```

---

## การจัดรูปแบบและเลย์เอาต์ใน React Native

\label{subsec\:styling-layout}

* ใช้ Flexbox ในการคำนวณ layout

```javascript
<View style={{ flexDirection: 'row', justifyContent: 'space-between' }}>
  <Text>Left</Text>
  <Text>Right</Text>
</View>
```

* ควรใช้ `StyleSheet.create` เพื่อรวม style และเพิ่มประสิทธิภาพ

```javascript
const styles = StyleSheet.create({
  card: { padding: 16, borderRadius: 12, backgroundColor: 'white' }
});
```

* การออกแบบ responsive ควรใช้ `SafeAreaView` และค่าแบบ fluid dimension

---

## Showcase: การสร้างแอป EduLesson แบบขั้นตอน



ตัวอย่างนี้สาธิตกระบวนการสร้างแอป **EduLesson** แบบเป็นขั้นตอน โดยเชื่อมโยงหลักการ **immutability, declarative UI, navigation state formalism, virtualization, และ pedagogical clarity**


---

## 🔹 Step 0 – การติดตั้งและสร้างโปรเจกต์

```bash
npx create-expo-app edulesson-rn --template blank
cd edulesson-rn
npx expo install react-dom react-native-web @expo/metro-runtime
npm install @react-navigation/native
npm install @react-navigation/native-stack
npx expo install react-native-screens react-native-safe-area-context
npm install @expo/vector-icons
npm run android   # หรือ npm run web / npm run ios
```

---

## 🔹 Step 1 – Minimal App ("Hello World")

```javascript
// App.js
import React from 'react';
import { NavigationContainer } from '@react-navigation/native';
import { createNativeStackNavigator } from '@react-navigation/native-stack';
import { View, Text } from 'react-native';

const Stack = createNativeStackNavigator();

function HomeScreen() {
  return (
    <View style={{ flex: 1, justifyContent: 'center', alignItems: 'center' }}>
      <Text style={{ fontSize: 20, fontWeight: 'bold' }}>Hello World</Text>
    </View>
  );
}

export default function App() {
  return (
    <NavigationContainer>
      <Stack.Navigator>
        <Stack.Screen name="Home" component={HomeScreen} />
      </Stack.Navigator>
    </NavigationContainer>
  );
}
```

---

## 🔹 Step 2 – เพิ่ม Component (LessonListScreen)

```javascript
// App.js
import React from 'react';
import { NavigationContainer } from '@react-navigation/native';
import { createNativeStackNavigator } from '@react-navigation/native-stack';
import { View, Text } from 'react-native';

const Stack = createNativeStackNavigator();

function LessonListScreen() {
  return (
    <View style={{ flex: 1, justifyContent:'center', alignItems: 'center' }}>
      <Text style={{ fontSize: 22, fontWeight: '700' }}>Hello, EduLesson</Text>
    </View>
  );
}

export default function App() {
  return (
    <NavigationContainer>
      <Stack.Navigator>
        <Stack.Screen name="Home" component={LessonListScreen} />
      </Stack.Navigator>
    </NavigationContainer>
  );
}
```

---

## 🔹 Step 3 – แสดงรายการด้วย FlatList

```javascript
// App.js
import React from 'react';
import { NavigationContainer } from '@react-navigation/native';
import { createNativeStackNavigator } from '@react-navigation/native-stack';
import { View, Text, FlatList, TouchableOpacity } from 'react-native';

const Stack = createNativeStackNavigator();

const lessons = [
  { title: 'Educational Psychology for Teachers', subtitle: 'Basic theories and classroom applications' },
  { title: 'Educational Measurement and Evaluation', subtitle: 'Design valid and reliable assessment tools' },
  { title: 'Positive Classroom Management', subtitle: 'Create a safe and engaging learning environment' },
];

function LessonListScreen() {
  return (
    <FlatList
      data={lessons}
      keyExtractor={(item, idx) => item.title + idx}
      renderItem={({ item }) => (
        <TouchableOpacity style={{ backgroundColor:'#fff', padding:12, margin:8, borderRadius:8 }}>
          <Text style={{ fontWeight:'bold' }}>{item.title}</Text>
          <Text>{item.subtitle}</Text>
        </TouchableOpacity>
      )}
    />
  );
}

export default function App() {
  return (
    <NavigationContainer>
      <Stack.Navigator>
        <Stack.Screen name="Lessons" component={LessonListScreen} />
      </Stack.Navigator>
    </NavigationContainer>
  );
}
```

---

## 🔹 Step 3b – เชื่อมโยงไปยังหน้ารายละเอียด

```javascript
// App.js
import React from 'react';
import { NavigationContainer } from '@react-navigation/native';
import { createNativeStackNavigator } from '@react-navigation/native-stack';
import { View, Text, FlatList, TouchableOpacity } from 'react-native';

const Stack = createNativeStackNavigator();

const lessons = [
  { title: 'Educational Psychology for Teachers', subtitle: 'Basic theories and classroom applications' },
  { title: 'Educational Measurement and Evaluation', subtitle: 'Design valid and reliable assessment tools' },
  { title: 'Positive Classroom Management', subtitle: 'Create a safe and engaging learning environment' },
];

function LessonListScreen({ navigation }) {
  return (
    <FlatList
      data={lessons}
      keyExtractor={(item, idx) => item.title + idx}
      renderItem={({ item }) => (
        <TouchableOpacity
          style={{ backgroundColor:'#fff', padding:12, margin:8, borderRadius:8 }}
          onPress={() => navigation.navigate('Detail', { unit: item })}
        >
          <Text style={{ fontWeight:'bold' }}>{item.title}</Text>
          <Text>{item.subtitle}</Text>
        </TouchableOpacity>
      )}
    />
  );
}

function LessonDetailScreen({ route }) {
  const { unit } = route.params;
  return (
    <View style={{ flex:1, padding:16 }}>
      <Text style={{ fontSize:20, fontWeight:'700' }}>{unit.title}</Text>
      <Text style={{ fontSize:14 }}>{unit.subtitle}</Text>
    </View>
  );
}

export default function App() {
  return (
    <NavigationContainer>
      <Stack.Navigator>
        <Stack.Screen name="Lessons" component={LessonListScreen} />
        <Stack.Screen name="Detail" component={LessonDetailScreen} />
      </Stack.Navigator>
    </NavigationContainer>
  );
}
```

---

## 🔹 Step 4 – เพิ่ม Objectives, Strategies, Materials

```javascript
// App.js
import React from 'react';
import { NavigationContainer } from '@react-navigation/native';
import { createNativeStackNavigator } from '@react-navigation/native-stack';
import { View, Text, FlatList, TouchableOpacity } from 'react-native';

const Stack = createNativeStackNavigator();

const lessons = [
  {
    title: 'Educational Psychology for Teachers',
    subtitle: 'Basic theories and classroom applications',
    objectives: ['Explain key learning theories', 'Relate theories to practice'],
    strategies: ['Case-based discussion'],
    materials: ['Theory summary infographics'],
  },
];

function LessonListScreen({ navigation }) {
  return (
    <FlatList
      data={lessons}
      keyExtractor={(item, idx) => item.title + idx}
      renderItem={({ item }) => (
        <TouchableOpacity
          style={{ backgroundColor:'#fff', padding:12, margin:8, borderRadius:8 }}
          onPress={() => navigation.navigate('Detail', { unit: item })}
        >
          <Text style={{ fontWeight:'bold' }}>{item.title}</Text>
          <Text>{item.subtitle}</Text>
        </TouchableOpacity>
      )}
    />
  );
}

function BulletList({ items }) {
  return (
    <View style={{ marginVertical:4 }}>
      {items.map((t, i) => (
        <View key={i} style={{ flexDirection:'row', marginBottom:4 }}>
          <Text style={{ marginRight:6 }}>{'•'}</Text>
          <Text>{t}</Text>
        </View>
      ))}
    </View>
  );
}

function LessonDetailScreen({ route }) {
  const { unit } = route.params;
  return (
    <View style={{ flex:1, padding:16 }}>
      <Text style={{ fontSize:20, fontWeight:'700' }}>{unit.title}</Text>
      <Text style={{ fontSize:14, marginBottom:12 }}>{unit.subtitle}</Text>

      <Text style={{ fontWeight:'bold' }}>Objectives</Text>
      <BulletList items={unit.objectives} />

      <Text style={{ fontWeight:'bold' }}>Strategies</Text>
      <BulletList items={unit.strategies} />

      <Text style={{ fontWeight:'bold' }}>Materials</Text>
      <BulletList items={unit.materials} />
    </View>
  );
}

export default function App() {
  return (
    <NavigationContainer>
      <Stack.Navigator>
        <Stack.Screen name="Lessons" component={LessonListScreen} />
        <Stack.Screen name="Detail" component={LessonDetailScreen} />
      </Stack.Navigator>
    </NavigationContainer>
  );
}
```

---

## 🔹 Step 5 – เพิ่มภาพ (Image Asset)

```javascript
// App.js
import React from 'react';
import { NavigationContainer } from '@react-navigation/native';
import { createNativeStackNavigator } from '@react-navigation/native-stack';
import { View, Text, FlatList, TouchableOpacity, Image } from 'react-native';

const Stack = createNativeStackNavigator();

const lessons = [
  {
    title: 'Educational Psychology for Teachers',
    subtitle: 'Basic theories and classroom applications',
    objectives: ['Explain key learning theories', 'Relate theories to practice'],
    strategies: ['Case-based discussion'],
    materials: ['Theory summary infographics'],
    imageUrl: 'https://static.vecteezy.com/system/resources/thumbnails/006/487/917/small_2x/man-avatar-icon-free-vector.jpg',
  },
];

function LessonListScreen({ navigation }) {
  return (
    <FlatList
      data={lessons}
      keyExtractor={(item, idx) => item.title + idx}
      renderItem={({ item }) => (
        <TouchableOpacity
          style={{ flexDirection:'row', alignItems:'center', padding:12, margin:8, backgroundColor:'#fff', borderRadius:8 }}
          onPress={() => navigation.navigate('Detail', { unit: item })}
        >
          <Image source={{ uri: item.imageUrl }} style={{ width:40, height:40, borderRadius:20, marginRight:12 }} />
          <View>
            <Text style={{ fontWeight:'bold' }}>{item.title}</Text>
            <Text>{item.subtitle}</Text>
          </View>
        </TouchableOpacity>
      )}
    />
  );
}

function LessonDetailScreen({ route }) {
  const { unit } = route.params;
  return (
    <View style={{ flex:1, padding:16 }}>
      <Image source={{ uri: unit.imageUrl }} style={{ width:80, height:80, borderRadius:40, marginBottom:12 }} />
      <Text style={{ fontSize:20, fontWeight:'700' }}>{unit.title}</Text>
      <Text>{unit.subtitle}</Text>
    </View>
  );
}

export default function App() {
  return (
    <NavigationContainer>
      <Stack.Navigator>
        <Stack.Screen name="Lessons" component={LessonListScreen} />
        <Stack.Screen name="Detail" component={LessonDetailScreen} />
      </Stack.Navigator>
    </NavigationContainer>
  );
}
```

---

## 🔹 Step 6 – ปรับแต่ง Design (Affordance + Visual Rhythm)

```javascript
// App.js
import React from 'react';
import { NavigationContainer } from '@react-navigation/native';
import { createNativeStackNavigator } from '@react-navigation/native-stack';
import { View, Text, FlatList, TouchableOpacity, Image } from 'react-native';
import { Ionicons } from '@expo/vector-icons';

const Stack = createNativeStackNavigator();

const lessons = [
  {
    title: 'Educational Psychology for Teachers',
    subtitle: 'Basic theories and classroom applications',
    objectives: ['Explain key learning theories', 'Relate theories to practice'],
    strategies: ['Case-based discussion'],
    materials: ['Theory summary infographics'],
    imageUrl: 'https://static.vecteezy.com/system/resources/thumbnails/006/487/917/small_2x/man-avatar-icon-free-vector.jpg',
  },
];

function LessonListScreen({ navigation }) {
  return (
    <FlatList
      data={lessons}
      keyExtractor={(item, idx) => item.title + idx}
      renderItem={({ item }) => (
        <TouchableOpacity
          style={{
            flexDirection:'row',
            alignItems:'center',
            backgroundColor:'#faf5ff',
            borderRadius:12,
            padding:16,
            marginVertical:8,
            marginHorizontal:16
          }}
          onPress={() => navigation.navigate('Detail', { unit: item })}
        >
          <Image source={{ uri: item.imageUrl }} style={{ width:40, height:40, borderRadius:20, marginRight:12 }} />
          <View style={{ flex:1 }}>
            <Text style={{ fontSize:16, fontWeight:'600', color:'#111' }}>{item.title}</Text>
            <Text style={{ fontSize:14, color:'#6b7280', marginTop:2 }}>{item.subtitle}</Text>
          </View>
          <Ionicons name="chevron-forward" size={20} color="#4b5563" />
        </TouchableOpacity>
      )}
    />
  );
}

function LessonDetailScreen({ route }) {
  const { unit } = route.params;
  return (
    <View style={{ flex:1, padding:16 }}>
      <Image source={{ uri: unit.imageUrl }} style={{ width:100, height:100, borderRadius:50, marginBottom:16 }} />
      <Text style={{ fontSize:22, fontWeight:'700' }}>{unit.title}</Text>
      <Text style={{ fontSize:16, color:'#555', marginBottom:12 }}>{unit.subtitle}</Text>
      <Text style={{ fontWeight:'bold', marginTop:8 }}>Objectives</Text>
      {unit.objectives.map((obj, idx) => (
        <Text key={idx}>{'• '}{obj}</Text>
      ))}
    </View>
  );
}

export default function App() {
  return (
    <NavigationContainer>
      <Stack.Navigator>
        <Stack.Screen name="Lessons" component={LessonListScreen} />
        <Stack.Screen name="Detail" component={LessonDetailScreen} />
      </Stack.Navigator>
    </NavigationContainer>
  );
}
```



### ผลลัพธ์ทางการสอน

นักศึกษาจะได้เชื่อมโยงหลักการ **วิศวกรรมซอฟต์แวร์** (immutability, determinism, modularity) กับ **การออกแบบการสอน** (progressive disclosure, cognitive load reduction, dual coding) ผ่านแอปพลิเคชันการศึกษาเชิงปฏิบัติ

